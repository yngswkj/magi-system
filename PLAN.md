# MAGI System 開発計画書

## 1. プロジェクト概要
複数のAI人格（ペルソナ）が1つの議題に対して議論・判定を行い、意思決定を支援するブラウザ完結型システム。
エヴァンゲリオンの「MAGIシステム」をモチーフにしたUIを採用し、視覚的にも楽しめる体験を提供する。

## 2. コンセプト & 特徴
*   **マルチペルソナ**: 1つのAIモデル（MVPではChatGPT）に対し、異なるシステムプロンプト（人格）を与えることで、多角的な視点からのレビューを実現する。
*   **サーバーレス**: バックエンドを持たず、ブラウザから直接APIを叩くクライアントサイド完結型。
*   **BYOK (Bring Your Own Key)**: ユーザー自身のAPIキーを使用し、セキュリティとコスト管理をユーザーに委ねる。

## 3. MVP機能要件 (Phase 1)

### 3.1. AIモデル
*   **対応モデル**: OpenAI API (GPT-5.1)
*   **構成**: 単一のAPIキーで、3つの独立したリクエストを並列実行する。

### 3.2. 人格（ペルソナ）設定
3つのコア（MELCHIOR, BALTHASAR, CASPER）に対し、以下のプリセットからロールを割り当て可能にする。
エヴァ準拠だけでなく、実用的なビジネス視点も取り入れる。

**プリセット案:**
1.  **論理的・科学者** (MELCHIOR風): 客観的事実とロジック重視。
2.  **保守的・母親** (BALTHASAR風): 安全性、倫理、現状維持を重視。
3.  **革新的・起業家**: リスクを取ってでも成長や新規性を重視。
4.  **批判的・監査役**: リスク、欠点、コストを厳しく指摘。
5.  **楽観的・ドリーマー**: 可能性、夢、ポジティブな側面を強調。
6.  **直感的・生活者** (CASPER風): 個人の欲望、直感、本音を重視。

### 3.3. ユーザーインターフェース (UI)
*   **デザイン**: 黒背景にオレンジの幾何学模様（MAGI風）。
*   **構成要素**:
    *   **APIキー設定モーダル**: 初回起動時および設定変更時に表示。
    *   **議題入力フォーム**: ユーザーが相談したい内容を入力。
    *   **3つのコア表示**: 各ペルソナの回答（承認/否定）とコメントを表示。
    *   **中央判定エリア**: 3つの結果を集約した最終判定を表示。
*   **アニメーション**: 思考中、回答表示時、承認/否定の判定時に演出を入れる。

## 4. 技術スタック
*   **Frontend**: HTML5, CSS3, JavaScript (Vanilla ES6+)
*   **API Client**: `fetch` API (OpenAI APIのエンドポイントを直接叩く)
*   **Storage**: `localStorage` (APIキー、選択したペルソナ設定の保存)

## 5. ディレクトリ構造
```
magi-system/
├── index.html      # メイン画面
├── css/
│   └── style.css   # MAGI風デザイン
├── js/
│   ├── app.js      # メインロジック
│   ├── api.js      # OpenAI API通信
│   └── personas.js # ペルソナ定義
└── PLAN.md         # 本計画書
```

## 6. Phase 2: Discussion Mode (完了)
*   **議論モード**: 3つのAI人格が相互に意見を交わし、クロスレビューを経て合意形成を行う。
*   **UI**: オーバーレイ形式のタイムライン表示、アニメーション演出。
*   **制御**: フェーズ進行の手動制御、回答長制限。
*   **モバイル対応**: レスポンシブデザイン。

## 7. Phase 3: Utility & Customization (現在進行中)
*   **結果のエクスポート機能**:
    *   議論ログや最終レポートをMarkdown/テキスト形式でダウンロード。
    *   クリップボードへのコピー。
*   **カスタムペルソナ作成機能**:
    *   ユーザー独自のシステムプロンプトを持つペルソナを作成・保存。
*   **サウンドエフェクト (SE)**:
    *   タイピング音、フェーズ移行音、判定音などの追加（ON/OFF機能付き）。

## 8. 今後の拡張 (Phase 4以降)
*   複数モデル対応 (Claude, Gemini)。
*   履歴管理機能。
